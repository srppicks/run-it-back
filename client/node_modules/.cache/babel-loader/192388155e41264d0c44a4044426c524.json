{"ast":null,"code":"var _jsxFileName = \"/Users/steper123/Desktop/FORKAIA/Week_2/RUN_IT_BACK/client/src/pages/index.js\";\nimport React, { Component } from 'react';\nimport Layout from '../hoc/Layout/Layout';\nimport Header from '../components/Header/Header';\nimport { GoogleLogin, GoogleLogout } from \"react-google-login\";\nconst GOOGLE_CLIENT_ID = \"891271447458-2tacoegsns3ccft1b88g46t3a0kkn6ep.apps.googleusercontent.com\";\n\nconst Main = () => {\n  const [loggedIn, setLogin] = React.useState(false);\n  const [currPlayer, setPlayer] = React.useState(null);\n  const [mode, setMode] = React.useState(\"home\");\n\n  const handleGoogleLogin = response => {\n    fetch('/login', {\n      method: 'POST',\n      headers: {\n        Authorization: `Bearer ${response.tokenId}`\n      }\n    }).then(fetchResponse => {\n      if (!fetchResponse.ok) {\n        alert('Unable to authenticate', fetchResponse.statusText);\n        setLogin(false);\n      } else {\n        setLogin(true);\n        const customer = fetch(`/api/players/${response.googleId}/`).then(response => {\n          if (!response.ok) {\n            throw new Error(response.status_text);\n          }\n\n          return response.json();\n        }).then(data => {\n          return data;\n        }).catch(error => {\n          console.log(error);\n        });\n        customer.then(data => {\n          setPlayer(data[0]);\n        }).catch(error => {\n          console.log(error);\n        });\n      }\n    });\n  };\n\n  const handleGoogleFailure = response => {\n    alert(response.error);\n  };\n\n  const handleGoogleLogout = () => {\n    fetch(\"/logout\", {\n      method: \"POST\"\n    }).then(fetchResponse => {\n      if (!fetchResponse.ok) {\n        alert(\"Error logging out\", fetchResponse.statusText);\n      }\n\n      setLogin(false);\n    });\n  };\n\n  const handleEditReturn = player => {\n    if (player) {\n      const updatedPerson = { ...currPlayer,\n        ...player\n      };\n      fetch(`/api/players/${updatedPerson.id}`, {\n        method: 'PUT',\n        body: JSON.stringify(updatedPerson),\n        headers: new Headers({\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        })\n      }).then(response => {\n        if (response.ok) {\n          return response.json();\n        }\n\n        throw new Error(response.statusText);\n      }).then(fetchedPlayer => {\n        // Create a copy of the collections, replacing the current article if this is an edit\n        console.log(\"Here\");\n        console.log(fetchedPlayer);\n        setPlayer(fetchedPlayer);\n      }).catch(err => console.error(err)); // eslint-disable-line no-console\n    }\n\n    console.log(\"Mode\");\n    setMode(\"home\");\n  }; //CONTINUE WORKING HERE\n\n\n  if (currPlayer === null) {\n    console.log(\"Here\");\n    return /*#__PURE__*/React.createElement(Layout, {\n      handleGoogleLogin: handleGoogleLogin,\n      handleGoogleLogout: handleGoogleLogout,\n      handleGoogleFailure: handleGoogleFailure,\n      handleEditReturn: handleEditReturn,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }\n    }));\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Layout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 9\n    }\n  })));\n};\n\nexport default Main;","map":{"version":3,"sources":["/Users/steper123/Desktop/FORKAIA/Week_2/RUN_IT_BACK/client/src/pages/index.js"],"names":["React","Component","Layout","Header","GoogleLogin","GoogleLogout","GOOGLE_CLIENT_ID","Main","loggedIn","setLogin","useState","currPlayer","setPlayer","mode","setMode","handleGoogleLogin","response","fetch","method","headers","Authorization","tokenId","then","fetchResponse","ok","alert","statusText","customer","googleId","Error","status_text","json","data","catch","error","console","log","handleGoogleFailure","handleGoogleLogout","handleEditReturn","player","updatedPerson","id","body","JSON","stringify","Headers","Accept","fetchedPlayer","err"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Layout from '../hoc/Layout/Layout'\nimport Header from '../components/Header/Header';\n\nimport { GoogleLogin, GoogleLogout } from \"react-google-login\";\n\nconst GOOGLE_CLIENT_ID = \"891271447458-2tacoegsns3ccft1b88g46t3a0kkn6ep.apps.googleusercontent.com\";\n\nconst Main = () => {\n  const [loggedIn, setLogin] = React.useState(false);\n  const [currPlayer, setPlayer] = React.useState(null);\n  const [mode, setMode] = React.useState(\"home\");\n\n\n  const handleGoogleLogin = (response) => {\n   fetch('/login', {\n     method: 'POST',\n     headers: {\n       Authorization: `Bearer ${response.tokenId}`,\n     },\n   }).then((fetchResponse) => {\n     if (!fetchResponse.ok) {\n       alert('Unable to authenticate', fetchResponse.statusText);\n       setLogin(false);\n     } else {\n       setLogin(true);\n       const customer = fetch(`/api/players/${response.googleId}/`)\n         .then(response => {\n           if (!response.ok) {\n             throw new Error(response.status_text);\n           }\n           return response.json();\n         })\n         .then(data => {\n           return data;\n         })\n         .catch(error => {\n           console.log(error);\n         });\n       customer\n         .then(data => {\n           setPlayer(data[0]);\n         }).catch(error => {\n           console.log(error);\n         });\n     }\n   });\n  };\n\n const handleGoogleFailure = response => {\n   alert(response.error);\n };\n\n const handleGoogleLogout = () => {\n   fetch(\"/logout\", {\n     method: \"POST\"\n   }).then(fetchResponse => {\n     if (!fetchResponse.ok) {\n       alert(\"Error logging out\", fetchResponse.statusText);\n     }\n     setLogin(false);\n   });\n };\n\n const handleEditReturn = (player) => {\n   if (player) {\n     const updatedPerson = { ...currPlayer, ...player };\n\n     fetch(`/api/players/${updatedPerson.id}`, {\n       method: 'PUT',\n       body: JSON.stringify(updatedPerson),\n       headers: new Headers({\n         Accept: 'application/json',\n         'Content-Type': 'application/json',\n       }),\n     })\n       .then((response) => {\n         if (response.ok) {\n           return response.json();\n         }\n         throw new Error(response.statusText);\n       })\n       .then((fetchedPlayer) => {\n         // Create a copy of the collections, replacing the current article if this is an edit\n         console.log(\"Here\");\n         console.log(fetchedPlayer);\n         setPlayer(fetchedPlayer);\n       })\n       .catch((err) => console.error(err)); // eslint-disable-line no-console\n   }\n\n   console.log(\"Mode\");\n   setMode(\"home\");\n\n };\n\n\n  //CONTINUE WORKING HERE\n  if (currPlayer === null) {\n    console.log(\"Here\");\n    return (\n      <Layout handleGoogleLogin={handleGoogleLogin}\n              handleGoogleLogout={handleGoogleLogout}\n              handleGoogleFailure={handleGoogleFailure}\n              handleEditReturn={handleEditReturn}>\n        <Header />\n      </Layout>\n    );\n  }\n\n  return (\n    <div>\n      <Layout>\n        <Header />\n      </Layout>\n    </div>\n  );\n\n}\n\nexport default Main;\n"]},"metadata":{},"sourceType":"module"}